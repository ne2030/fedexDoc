"use strict";function authenticate(){var e=document.cookie;return new Promise(function(o){""!=e?(isRoot(e),o("done")):login().then(function(){isRoot(e),o("done")})})}function isRoot(e){isAuthenticate=!!e.match("erguono@gmail.com")}function login(){return new Promise(function(e,o){provider.addScope("https://www.googleapis.com/auth/plus.login"),firebase.auth().signInWithPopup(provider).then(function(o){var t=o.user;setCookie(t.email,30),e("done")}).catch(function(e){o(e)})})}function setCookie(e,o){var t=new Date;t.setDate(t.getDate()+o);var i="expires="+t.toUTCString();document.cookie="email="+e+";"+i}var provider=new firebase.auth.GoogleAuthProvider,isAuthenticate=void 0;
"use strict";function showList(e,t){e.innerHTML="";var r=t?cache.tomorrow:cache.today;r.map(function(r){var o=document.createElement("tr"),n="o"==r["완료"]?["btn-success","완료"]:["btn-danger","미완"],a="recieve"==r["타입"]?"recieve":"send";o.innerHTML='\n      <tr class="delivery '+a+'">\n        <td> '+r["위치"]+" </td>\n        <td> "+r["장소"]+" </td>\n        <td> "+r["사람"]+" </td>\n        <td> "+r["내용"]+' </td>\n        <td> <div class="btn '+n[0]+' btn-xs no-cursor"> '+n[1]+" </div> </td>\n        <td> <div id="+r.key+' class="btn btn-primary btn-xs"> 체크 </div> </td>\n      </tr>\n    ',e.appendChild(o),document.getElementById(r.key).addEventListener("click",function(){completeWork(r,t)})})}function completeWork(e,t){var r=void 0;r=t?tomorrow:today,console.log("/doc/"+r+"/"+e.key),firebase.database().ref("/doc/"+r+"/"+e.key).update({"장소":e["장소"],"사람":e["사람"],"내용":e["내용"],"완료":"o"})}function postDelivery(){if(postDate="today"==selects[1].value?today:tomorrow,""==inputs[0].value||""==inputs[1].value)return alert("장소나 사람을 확실히 입력해 주십시오");var e=whichFloor(input[0].value),t=inputs[0].value,r=inputs[1].value,o=""==inputs[2].value?"생략":inputs[2].value,n=selects[0].value;inputs[0].value=inputs[1].value=inputs[2].value="",firebase.database().ref("doc/"+postDate).push({"위치":e,"장소":t,"사람":r,"내용":o,"완료":"x","타입":n})}function whichFloor(e){var t=["사회보장과 장애인지원과 민원여권과 부동산정보과","재무과 세무과 교육지원과 평생학습과 정신보건센터","감사담당관 공동주택지원과 주택사업과 도시관리과 건축과 일자리경제과 공원녹지과","기획재정국장실 교육복지국장실 도시계획국장실 교통환경국장실 공무원노조 기획예산과 복지정책과 디지털홍보과 물안전관리과 ICT지원센터","구청장실 부구청장실 행정지원과 기획상황실 어르신복지과","자치행정과 문화과 여성가족과 녹색환경과 자원순환과 체육청소년과","노원구의회","의회사무국","교통행정과 토목과 교통지도과 건설관리과 자동차민원실 생활건강과 보건위생과"],r=!0,o=!1,n=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0)if(floor=a.value,floor.match(e))return 9==t.indexOf(floor)?"-":t.indexOf(floor)}catch(e){o=!0,n=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw n}}}function manageDelivery(){var e=document.getElementById("basic_container"),t=document.getElementById("manage_container"),r=document.getElementById("manage_today"),o=document.getElementById("manage_tomorrow");if(r.innerHTML="",o.innerHTML="",cache.today&&deleteList(cache.today,r,today),cache.tomorrow&&deleteList(cache.tomorrow,o,tomorrow),isMobile)Swiped.init({query:".removable",duration:700,left:1200,right:1200,onOpen:function(e){this.destroy(!0);var t=e.getAttribute("date");firebase.database().ref("/doc/"+t+"/"+e.id).remove()}});else{var n=document.querySelectorAll(".removable-pc"),a=!0,i=!1,d=void 0;try{for(var l,c=function(){var e=l.value;e.addEventListener("click",function(){var t=e.getAttribute("date");firebase.database().ref("/doc/"+t+"/"+e.id).remove(),e.parentNode.removeChild(e)})},s=n[Symbol.iterator]();!(a=(l=s.next()).done);a=!0)c()}catch(e){i=!0,d=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw d}}}e.classList.toggle("hidden"),t.classList.toggle("hidden")}function filteringCache(e,t){var r=[];for(var o in e)r.push(Object.assign({},e[o],{key:o}));r.sort(function(e,t){var r=parseInt(e["위치"]),o=parseInt(t["위치"]);return r<o?1:r>o?-1:0}),cache[t]=r}function deleteList(e,t,r){e.map(function(e){var o=document.createElement("div"),n=isMobile?"removable":"removable-pc";o.setAttribute("class",n),o.setAttribute("id",e.key),o.setAttribute("date",r),o.innerHTML="\n      "+e["장소"]+"     /     "+e["사람"]+"\n    ",t.appendChild(o)})}var cache={today:void 0,tomorrow:void 0,filter:filteringCache},now=new Date,will=new Date,today=now.getFullYear()+" - "+(now.getMonth()+1)+" - "+now.getDate();will.setDate(will.getDate()+1);var tomorrow=will.getFullYear()+" - "+(will.getMonth()+1)+" - "+will.getDate(),todayList=document.getElementById("today_contents"),tomorrowList=document.getElementById("tomorrow_contents");firebase.database().ref("doc/"+today).on("value",function(e){if(e.val())cache.filter(e.val(),"today"),showList(todayList);else{if(!cache.today)return;cache.today=void 0,todayList.innerHTML="";var t=document.createElement("tr");t.innerHTML='<tr>\n      <td colspan="6"> 할 일이 없습니다!! </td>\n    </tr>',todayList.appendChild(t)}}),firebase.database().ref("doc/"+tomorrow).on("value",function(e){if(e.val())cache.filter(e.val(),"tomorrow"),showList(tomorrowList,1);else{if(!cache.tomorrow)return;cache.tomorrow=void 0,tomorrowList.innerHTML="";var t=document.createElement("tr");t.innerHTML='<tr>\n      <td colspan="6"> 예정된 일이 없습니다!! </td>\n    </tr>',tomorrowList.appendChild(t)}});var btn=document.getElementById("submit_btn"),postDate=void 0;btn.addEventListener("click",function(){postDelivery()});var inputs=document.getElementsByTagName("input"),selects=document.getElementsTagName("select"),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=[].concat(inputs,selects)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var element=_step.value;element.addEventListener("keydown",function(e){13==e.keyCode&&postDelivery()})}}catch(e){_didIteratorError=!0,_iteratorError=e}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var btn_manage=document.getElementById("btn-manage");btn_manage.addEventListener("click",function(){authenticate().then(function(){isAuthenticate?manageDelivery():alert("인증된 관리자가 아닙니다")})});
"use strict";var isMobile=!1,mobileInfo=new Array("Android","iPhone","iPod","iPad","BlackBerry","Windows CE","SAMSUNG","LG","MOT","SonyEricsson");for(var info in mobileInfo)if(null!=navigator.userAgent.match(mobileInfo[info])){isMobile=!0;break}var tableFloor=document.querySelectorAll("table th:first-child span");isMobile&&(tableFloor[0].classList.add("hidden"),tableFloor[2].classList.add("hidden"),tableFloor[1].classList.remove("hidden"),tableFloor[3].classList.remove("hidden"));
"use strict";"undefined"==typeof Promise&&(require("promise/lib/rejection-tracking").enable(),window.Promise=require("promise/lib/es6-extensions.js"));
"use strict";!function(){function t(t,e){document.addEventListener(t,function(t){a._elems.forEach(function(i){for(var n=t.target;n;){if(n===i.elem)return i[e](t),!1;n=n.parentNode}return!1})})}function e(){var t=[].shift.call(arguments),e=arguments[0];for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}var i=window.navigator.msPointerEnabled,n={start:i?"MSPointerDown":"touchstart",move:i?"MSPointerMove":"touchmove",end:i?"MSPointerUp":"touchend"},o=function(){var t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return"-"+e+"-"}(),s=function(){var t,e=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(void 0!==e.style[t])return i[t]}(),r={transition:o+"transition",transform:o+"transform"},h=function(){},a=function t(i){var n={duration:200,tolerance:50,time:200,dir:1,right:0,left:0};i=e(n,i||{}),this.duration=i.duration,this.tolerance=i.tolerance,this.time=i.time,this.width=i.left||i.right,this.elem=i.elem,this.list=i.list,this.dir=i.dir,this.group=i.group,this.id=t.elemId++,this.onOpen="function"==typeof i.onOpen?i.onOpen:h,this.onClose="function"==typeof i.onClose?i.onClose:h,this.right=i.right,this.left=i.left,(i.right>0&&i.tolerance>i.right||i.left>0&&i.tolerance>i.left)&&console.warn("tolerance must be less then left and right")};a._elems=[],a.groupCounter=0,a.elemId=0,a.init=function(t){a.groupCounter++;var i=document.querySelectorAll(t.query),n=[];return delete t.query,[].forEach.call(i,function(i){var o=e({elem:i,group:a.groupCounter},t);n.push(new a(o))}),a._bindEvents(),a._elems=a._elems.concat(n),1===n.length?n[0]:n},a._closeAll=function(t){a._elems.forEach(function(e){e.group===t&&e.close(!0)})},a.prototype.transitionEnd=function(t,e){function i(){e.call(n,t),t.removeEventListener(s,i)}var n=this;t.addEventListener(s,i)},a.prototype.touchStart=function(t){var e=t.changedTouches[0];1===t.touches.length&&(this.touchId=e.identifier,this.x=e.pageX,this.y=e.pageY,this.startTime=new Date,this.resetValue(),this.list?a._closeAll(this.group):this.close(!0))},a.prototype.touchMove=function(t){var e=t.changedTouches[0];this.isValidTouch(t)&&(this.delta=e.pageX-this.x,this.dir=this.delta<0?-1:1,this.width=this.delta<0?this.right:this.left,this.defineUserAction(e),this.startSwipe&&(this.move(),t.preventDefault()))},a.prototype.touchEnd=function(t){this.isValidTouch(t,!0)&&this.startSwipe&&(this.dir*this.delta>this.tolerance||new Date-this.startTime<this.time?this.open():this.close(),t.stopPropagation(),t.preventDefault())},a.prototype.open=function(t){this.animation(this.dir*this.width),this.swiped=!0,t||this.transitionEnd(this.elem,this.onOpen),this.resetValue()},a.prototype.close=function(t){this.animation(0),this.swiped=!1,t||this.transitionEnd(this.elem,this.onClose),this.resetValue()},a.prototype.toggle=function(){this.swiped?this.close():this.open()},a.prototype.resetValue=function(){this.startSwipe=!1,this.startScroll=!1,this.delta=0},a._bindEvents=function(){return!a.eventBinded&&(t(n.move,"touchMove"),t(n.end,"touchEnd"),t(n.start,"touchStart"),void(a.eventBinded=!0))},a.prototype.defineUserAction=function(t){var e=10,i=10;Math.abs(this.y-t.pageY)>i&&!this.startSwipe?this.startScroll=!0:Math.abs(this.delta)>e&&!this.startScroll&&(this.startSwipe=!0)},a.prototype.isValidTouch=function(t,e){var i=e?"changedTouches":"targetTouches";return t[i][0].identifier===this.touchId},a.prototype.move=function(){if(this.dir>0&&(this.delta<0||0===this.left)||this.dir<0&&(this.delta>0||0===this.right))return!1;var t=Math.abs(this.delta);t>this.width&&(this.delta=this.dir*(this.width+(t-this.width)/8)),this.animation(this.delta,0)},a.prototype.animation=function(t,e){e=void 0===e?this.duration:e,this.elem.style.cssText=r.transition+":"+r.transform+" "+e+"ms; "+r.transform+":translate3d("+t+"px, 0px, 0px)"},a.prototype.destroy=function(t){var e=this.id;a._elems.forEach(function(t,i){t.id===e&&a._elems.splice(i,1)}),t&&this.elem.parentNode.removeChild(this.elem)},window.Swiped=a}();